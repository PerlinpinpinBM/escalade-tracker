<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Escalade">
<link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%2310b981' width='100' height='100'/%3E%3Ctext y='70' x='50' text-anchor='middle' font-size='60'%3E‚õ∞Ô∏è%3C/text%3E%3C/svg%3E">
<title>Escalade Tracker v4.0</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:linear-gradient(135deg,#1e293b 0%,#0f172a 100%);color:#fff;min-height:100vh;padding:15px;-webkit-user-select:none;user-select:none;overflow-x:hidden}.container{max-width:900px;margin:0 auto;padding-bottom:60px}header{text-align:center;margin-bottom:25px;position:relative}.version{position:absolute;top:0;right:0;background:#334155;padding:5px 12px;border-radius:20px;font-size:0.7rem;color:#94a3b8}h1{font-size:2.2rem;margin-bottom:8px;display:flex;align-items:center;justify-content:center;gap:12px}.subtitle{color:#94a3b8;font-size:0.9rem}.nav{display:flex;gap:8px;background:#334155;padding:10px;border-radius:12px;margin-bottom:25px;overflow-x:auto;-webkit-overflow-scrolling:touch}.nav button{flex:1;padding:12px 15px;border:none;background:transparent;color:#fff;border-radius:8px;font-size:0.95rem;white-space:nowrap;min-width:90px;cursor:pointer;transition:all 0.3s}.nav button.active{background:#10b981}.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(110px,1fr));gap:15px;margin-bottom:25px}.stat-card{background:#1e293b;padding:18px;border-radius:12px;border:1px solid #334155;text-align:center}.stat-label{color:#94a3b8;font-size:0.8rem;margin-bottom:5px}.stat-value{font-size:1.8rem;font-weight:bold;color:#10b981}.card{background:#1e293b;padding:22px;border-radius:12px;border:1px solid #334155;margin-bottom:18px}.card h2{margin-bottom:18px;display:flex;justify-content:space-between;align-items:center;font-size:1.3rem}.btn{padding:11px 18px;border:none;border-radius:8px;font-size:0.95rem;transition:all 0.3s;cursor:pointer}.btn-primary{background:#10b981;color:white}.btn-primary:active{background:#059669}.btn-secondary{background:#475569;color:white}.btn-secondary:active{background:#334155}.btn-danger{background:#ef4444;color:white;padding:8px 12px;font-size:0.85rem}.btn-danger:active{background:#dc2626}.btn-success{background:#10b981;color:white;padding:8px 12px;font-size:0.85rem}.btn-success:active{background:#059669}.form-grid{display:grid;grid-template-columns:1fr;gap:14px;margin-bottom:18px}.form-group{display:flex;flex-direction:column}.form-group label{color:#94a3b8;font-size:0.85rem;margin-bottom:5px;font-weight:500}.form-group input,.form-group select{padding:12px;border:1px solid #475569;border-radius:8px;background:#0f172a;color:#fff;font-size:1rem;-webkit-appearance:none;appearance:none}.form-group select{background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='white' viewBox='0 0 24 24'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 8px center;background-size:24px;padding-right:35px}.item{border-bottom:1px solid #334155;padding:14px 0;display:flex;justify-content:space-between;align-items:center;gap:12px}.item:last-child{border-bottom:none}.item-info{flex:1;min-width:0}.item-info h3{margin-bottom:5px;font-size:1.05rem;word-wrap:break-word}.item-details{color:#94a3b8;font-size:0.85rem;word-wrap:break-word}.item-actions{display:flex;gap:8px;flex-shrink:0}.empty{text-align:center;color:#94a3b8;padding:35px;font-size:0.95rem}.hidden{display:none !important}.badge{display:inline-block;padding:4px 10px;border-radius:6px;font-size:0.7rem;font-weight:600;margin-left:8px;white-space:nowrap}.badge-projet{background:#fbbf24;color:#000}.badge-r√©ussi{background:#10b981;color:#fff}.badge-abandon{background:#ef4444;color:#fff}.user-badge{background:#3b82f6;color:#fff;padding:3px 8px;border-radius:12px;font-size:0.7rem;margin-left:8px;white-space:nowrap}.sync{position:fixed;bottom:20px;right:20px;background:#334155;padding:10px 14px;border-radius:10px;font-size:0.8rem;display:flex;align-items:center;gap:8px;z-index:1000;box-shadow:0 4px 12px rgba(0,0,0,0.3)}.sync-dot{width:8px;height:8px;border-radius:50%;background:#10b981;animation:pulse 2s infinite}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.login-screen{display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}.login-card{background:#1e293b;padding:40px;border-radius:16px;border:1px solid #334155;max-width:400px;width:100%;text-align:center}.login-card h1{font-size:2rem;margin-bottom:10px}.login-card .subtitle{margin-bottom:30px}.login-error{background:#7f1d1d;color:#fca5a5;padding:12px;border-radius:8px;margin-bottom:20px;font-size:0.9rem}.location-card{background:#334155;padding:16px;border-radius:10px;margin-bottom:12px;cursor:pointer;transition:all 0.3s}.location-card:hover{background:#475569}.location-card h3{font-size:1.1rem;margin-bottom:6px}.location-stats{color:#94a3b8;font-size:0.85rem}.routes-list{margin-top:15px;padding-top:15px;border-top:1px solid #475569}@media(max-width:600px){h1{font-size:1.8rem}.card h2{font-size:1.1rem}.stat-value{font-size:1.5rem}}
</style>
</head>
<body>
<div id="login-screen" class="login-screen"><div class="login-card"><h1>üîí Escalade Tracker</h1><p class="subtitle">Acc√®s s√©curis√©</p><div id="login-error" class="login-error hidden"></div><div class="form-group"><label>Mot de passe</label><input type="password" id="password-input" placeholder="Entrez le mot de passe"></div><button class="btn btn-primary" onclick="checkPassword()" style="width:100%;margin-top:15px">Connexion</button></div></div>
<div id="app-content" class="hidden">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import{getDatabase,ref,set,onValue,remove}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";const firebaseApp=initializeApp({apiKey:"AIzaSyDILef-HO__QCnEJwQDNvCELmXXbF3kAfI",authDomain:"escalade-tracker.firebaseapp.com",databaseURL:"https://escalade-tracker-default-rtdb.europe-west1.firebasedatabase.app",projectId:"escalade-tracker",storageBucket:"escalade-tracker.firebasestorage.app",messagingSenderId:"355020489656",appId:"1:355020489656:web:515ba5f926045ff86f054d"}),db=getDatabase(firebaseApp);window.app={sessions:[],routes:[],user:localStorage.getItem("climbing-username")||"",cotations:["5a","5b","5c","6a","6a+","6b","6b+","6c","6c+","7a","7a+","7b","7b+","7c","7c+","8a"],chart:null,db:db,init(){this.loadData();const user=this.user||"Bruno";document.getElementById("session-username").value=user;document.getElementById("route-username").value=user;const today=new Date().toISOString().split("T")[0];document.getElementById("session-date").value=today;document.getElementById("route-date").value=today},loadData(){document.getElementById("sync-status").textContent="Synchronisation...";onValue(ref(this.db,"sessions"),snapshot=>{const data=snapshot.val();this.sessions=data?Object.values(data):[];this.updateDashboard();this.renderSessions();document.getElementById("sync-status").textContent="Synchronis√©"});onValue(ref(this.db,"routes"),snapshot=>{const data=snapshot.val();this.routes=data?Object.values(data):[];this.updateDashboard();this.renderSalles();this.renderFalaises();document.getElementById("sync-status").textContent="Synchronis√©"})},async saveSession(session){try{document.getElementById("sync-status").textContent="Sauvegarde...";await set(ref(this.db,"sessions/"+session.id),session);setTimeout(()=>document.getElementById("sync-status").textContent="Synchronis√©",600)}catch(e){console.error(e);document.getElementById("sync-status").textContent="‚ö†Ô∏è Erreur"}},async saveRoute(route){try{document.getElementById("sync-status").textContent="Sauvegarde...";await set(ref(this.db,"routes/"+route.id),route);setTimeout(()=>document.getElementById("sync-status").textContent="Synchronis√©",600)}catch(e){console.error(e);document.getElementById("sync-status").textContent="‚ö†Ô∏è Erreur"}},showView(view){document.querySelectorAll(".nav button").forEach(b=>b.classList.remove("active"));event.target.classList.add("active");["dashboard","salles","falaises","sessions","team"].forEach(v=>document.getElementById(v+"-view").classList.add("hidden"));document.getElementById(view+"-view").classList.remove("hidden");if(view==="team")this.renderTeamActivity();if(view==="salles")this.renderSalles();if(view==="falaises")this.renderFalaises()},toggleForm(id){const form=document.getElementById(id);form.classList.toggle("hidden");if(!form.classList.contains("hidden"))form.scrollIntoView({behavior:"smooth",block:"nearest"})},async addSession(){const u=document.getElementById("session-username").value,s={id:Date.now(),username:u,date:document.getElementById("session-date").value,lieu:document.getElementById("session-lieu").value,duree:document.getElementById("session-duree").value,notes:document.getElementById("session-notes").value};if(!s.username||!s.date||!s.lieu){alert("Remplis au moins ton nom, la date et le lieu");return}if(s.username){this.user=s.username;localStorage.setItem("climbing-username",this.user)}await this.saveSession(s);document.getElementById("session-username").value=this.user;document.getElementById("session-date").value=new Date().toISOString().split("T")[0];document.getElementById("session-lieu").value="";document.getElementById("session-duree").value="";document.getElementById("session-notes").value="";this.toggleForm("session-form")},async deleteSession(id){if(confirm("Supprimer cette session ?")){try{await remove(ref(this.db,"sessions/"+id))}catch(e){console.error(e)}}},async addRoute(){const u=document.getElementById("route-username").value,r={id:Date.now(),username:u,nom:document.getElementById("route-nom").value,cotation:document.getElementById("route-cotation").value,categorie:document.getElementById("route-categorie").value,lieu:document.getElementById("route-lieu").value,type:document.getElementById("route-type").value,statut:document.getElementById("route-statut").value,essais:parseInt(document.getElementById("route-essais").value),date:document.getElementById("route-date").value,notes:document.getElementById("route-notes").value};if(!r.username||!r.nom||!r.date||!r.lieu){alert("Remplis au moins ton nom, le nom de la voie, le lieu et la date");return}if(r.username){this.user=r.username;localStorage.setItem("climbing-username",this.user)}await this.saveRoute(r);document.getElementById("route-username").value=this.user;document.getElementById("route-nom").value="";document.getElementById("route-cotation").value="6a";document.getElementById("route-categorie").value="salle";document.getElementById("route-lieu").value="";document.getElementById("route-type").value="copyrock";document.getElementById("route-statut").value="projet";document.getElementById("route-essais").value="1";document.getElementById("route-date").value=new Date().toISOString().split("T")[0];document.getElementById("route-notes").value="";this.toggleForm("route-form")},async deleteRoute(id){if(confirm("Supprimer cette voie ?")){try{await remove(ref(this.db,"routes/"+id))}catch(e){console.error(e)}}},async updateRouteStatus(id,status){const r=this.routes.find(r=>r.id===id);if(r){r.statut=status;await this.saveRoute(r)}},renderSessions(){const list=document.getElementById("sessions-list");if(this.sessions.length===0){list.innerHTML='<div class="empty">Aucune session enregistr√©e</div>';return}list.innerHTML=this.sessions.slice().reverse().map(s=>{const ub=s.username?'<span class="user-badge">'+s.username+"</span>":"",nt=s.notes?" ‚Ä¢ "+s.notes:"";return'<div class="item"><div class="item-info"><h3>'+s.lieu+" "+ub+'</h3><div class="item-details">'+s.date+" ‚Ä¢ "+s.duree+nt+'</div></div><div class="item-actions"><button class="btn btn-danger" onclick="app.deleteSession('+s.id+')">üóë</button></div></div>'}).join("")},renderSalles(){const list=document.getElementById("salles-list"),locations={};this.routes.filter(r=>r.categorie==="salle").forEach(r=>{if(!locations[r.lieu])locations[r.lieu]={total:0,reussi:0,projet:0,routes:[]};locations[r.lieu].total++;if(r.statut==="r√©ussi")locations[r.lieu].reussi++;if(r.statut==="projet")locations[r.lieu].projet++;locations[r.lieu].routes.push(r)});const locs=Object.keys(locations);if(locs.length===0){list.innerHTML='<div class="empty">Aucune salle enregistr√©e</div>';return}list.innerHTML=locs.sort().map(loc=>{const data=locations[loc];return'<div class="location-card" onclick="app.toggleLocationRoutes(\''+loc+'\')"><h3>üè¢ '+loc+'</h3><div class="location-stats">'+data.reussi+" r√©ussies ‚Ä¢ "+data.projet+" projets ‚Ä¢ "+data.total+' total</div><div id="routes-'+loc.replace(/\s/g,"-")+'" class="routes-list hidden">'+data.routes.slice().reverse().map(r=>{const ub=r.username?'<span class="user-badge">'+r.username+"</span>":"",nt=r.notes?" ‚Ä¢ "+r.notes:"",btn=r.statut==="projet"?'<button class="btn btn-success" onclick="event.stopPropagation();app.updateRouteStatus('+r.id+",'r√©ussi')\">‚úì</button>":"";return'<div class="item"><div class="item-info"><h3>'+r.nom+' <span class="badge badge-'+r.statut+'">'+r.statut+"</span> "+ub+'</h3><div class="item-details">'+r.cotation+" ‚Ä¢ "+r.type+" ‚Ä¢ "+r.essais+" essai(s) ‚Ä¢ "+r.date+nt+'</div></div><div class="item-actions">'+btn+'<button class="btn btn-danger" onclick="event.stopPropagation();app.deleteRoute('+r.id+')">üóë</button></div></div>'}).join("")+"</div></div>"}).join("")},renderFalaises(){const list=document.getElementById("falaises-list"),locations={};this.routes.filter(r=>r.categorie==="falaise").forEach(r=>{if(!locations[r.lieu])locations[r.lieu]={total:0,reussi:0,projet:0,routes:[]};locations[r.lieu].total++;if(r.statut==="r√©ussi")locations[r.lieu].reussi++;if(r.statut==="projet")locations[r.lieu].projet++;locations[r.lieu].routes.push(r)});const locs=Object.keys(locations);if(locs.length===0){list.innerHTML='<div class="empty">Aucune falaise enregistr√©e</div>';return}list.innerHTML=locs.sort().map(loc=>{const data=locations[loc];return'<div class="location-card" onclick="app.toggleLocationRoutes(\''+loc+'\')"><h3>‚õ∞Ô∏è '+loc+'</h3><div class="location-stats">'+data.reussi+" r√©ussies ‚Ä¢ "+data.projet+" projets ‚Ä¢ "+data.total+' total</div><div id="routes-'+loc.replace(/\s/g,"-")+'" class="routes-list hidden">'+data.routes.slice().reverse().map(r=>{const ub=r.username?'<span class="user-badge">'+r.username+"</span>":"",nt=r.notes?" ‚Ä¢ "+r.notes:"",btn=r.statut==="projet"?'<button class="btn btn-success" onclick="event.stopPropagation();app.updateRouteStatus('+r.id+",'r√©ussi')\">‚úì</button>":"";return'<div class="item"><div class="item-info"><h3>'+r.nom+' <span class="badge badge-'+r.statut+'">'+r.statut+"</span> "+ub+'</h3><div class="item-details">'+r.cotation+" ‚Ä¢ "+r.type+" ‚Ä¢ "+r.essais+" essai(s) ‚Ä¢ "+r.date+nt+'</div></div><div class="item-actions">'+btn+'<button class="btn btn-danger" onclick="event.stopPropagation();app.deleteRoute('+r.id+')">üóë</button></div></div>'}).join("")+"</div></div>"}).join("")},toggleLocationRoutes(loc){const el=document.getElementById("routes-"+loc.replace(/\s/g,"-"));el.classList.toggle("hidden")},renderTeamActivity(){const activity=document.getElementById("team-activity"),ranking=document.getElementById("team-ranking"),all=[];this.sessions.forEach(s=>all.push({type:"session",data:s,date:s.date}));this.routes.forEach(r=>all.push({type:"route",data:r,date:r.date}));all.sort((a,b)=>new Date(b.date)-new Date(a.date));const recent=all.slice(0,10);if(recent.length===0){activity.innerHTML='<div class="empty">Aucune activit√© pour le moment</div>'}else{activity.innerHTML=recent.map(i=>{const u=i.data.username||"Anonyme";if(i.type==="session"){return'<div class="item"><div class="item-info"><h3>üìÖ Session - '+i.data.lieu+' <span class="user-badge">'+u+'</span></h3><div class="item-details">'+i.data.date+" ‚Ä¢ "+i.data.duree+"</div></div></div>"}else{return'<div class="item"><div class="item-info"><h3>üßó '+i.data.nom+' <span class="badge badge-'+i.data.statut+'">'+i.data.statut+'</span> <span class="user-badge">'+u+'</span></h3><div class="item-details">'+i.data.cotation+" ‚Ä¢ "+i.data.type+" ‚Ä¢ "+i.data.date+"</div></div></div>"}}).join("")}const stats={};this.routes.filter(r=>r.statut==="r√©ussi").forEach(r=>{const u=r.username||"Anonyme";if(!stats[u])stats[u]={voies:0,sessions:0,maxCotation:""};stats[u].voies++;if(!stats[u].maxCotation||this.cotations.indexOf(r.cotation)>this.cotations.indexOf(stats[u].maxCotation)){stats[u].maxCotation=r.cotation}});this.sessions.forEach(s=>{const u=s.username||"Anonyme";if(!stats[u])stats[u]={voies:0,sessions:0,maxCotation:"-"};stats[u].sessions++});const sorted=Object.entries(stats).sort((a,b)=>b[1].voies-a[1].voies);if(sorted.length===0){ranking.innerHTML='<div class="empty">Aucune donn√©e pour le classement</div>'}else{ranking.innerHTML=sorted.map((e,i)=>'<div class="item"><div class="item-info"><h3>'+(i+1)+". "+e[0]+'</h3><div class="item-details">'+e[1].voies+" voies r√©ussies ‚Ä¢ "+e[1].sessions+" sessions ‚Ä¢ Max: "+e[1].maxCotation+"</div></div></div>").join("")}},updateDashboard(){const reussies=this.routes.filter(r=>r.statut==="r√©ussi"),maxCot=reussies.length>0?reussies.map(r=>r.cotation).sort((a,b)=>this.cotations.indexOf(b)-this.cotations.indexOf(a))[0]:"-";document.getElementById("total-sessions").textContent=this.sessions.length;document.getElementById("total-routes").textContent=reussies.length;document.getElementById("best-grade").textContent=maxCot;this.updateChart();const rs=document.getElementById("recent-sessions");if(this.sessions.length===0){rs.innerHTML='<div class="empty">Aucune session enregistr√©e</div>'}else{rs.innerHTML=this.sessions.slice(-3).reverse().map(s=>{const ub=s.username?'<span class="user-badge">'+s.username+"</span>":"";return'<div class="item"><div class="item-info"><h3>'+s.lieu+" "+ub+'</h3><div class="item-details">'+s.date+" ‚Ä¢ "+s.duree+"</div></div></div>"}).join("")}const proj=document.getElementById("current-projects"),active=this.routes.filter(r=>r.statut==="projet");if(active.length===0){proj.innerHTML='<div class="empty">Aucun projet en cours</div>'}else{proj.innerHTML=active.map(r=>{const ub=r.username?'<span class="user-badge">'+r.username+"</span>":"";return'<div class="item"><div class="item-info"><h3>'+r.nom+" "+ub+'</h3><div class="item-details">'+r.cotation+" ‚Ä¢ "+r.type+" ‚Ä¢ "+r.essais+" essai(s)</div></div><div class=\"item-actions\"><button class=\"btn btn-success\" onclick=\"app.updateRouteStatus("+r.id+",'r√©ussi')\">‚úì R√©ussi</button></div></div>"}).join("")}},updateChart(){const ctx=document.getElementById("yearChart");if(!ctx)return;const year=new Date().getFullYear(),months=["Jan","F√©v","Mar","Avr","Mai","Jun","Jul","Ao√ª","Sep","Oct","Nov","D√©c"],brunoData=new Array(12).fill(0),sophieData=new Array(12).fill(0),brunoMax=new Array(12).fill(null),sophieMax=new Array(12).fill(null);this.routes.filter(r=>r.statut==="r√©ussi"&&new Date(r.date).getFullYear()===year).forEach(r=>{const month=new Date(r.date).getMonth(),gradeIndex=this.cotations.indexOf(r.cotation);if(r.username==="Bruno"){brunoData[month]++;if(brunoMax[month]===null||gradeIndex>brunoMax[month])brunoMax[month]=gradeIndex}else if(r.username==="Sophie"){sophieData[month]++;if(sophieMax[month]===null||gradeIndex>sophieMax[month])sophieMax[month]=gradeIndex}});if(this.chart)this.chart.destroy();this.chart=new Chart(ctx,{type:"bar",data:{labels:months,datasets:[{label:"Bruno (voies)",data:brunoData,backgroundColor:"rgba(59,130,246,0.8)",borderColor:"rgb(59,130,246)",borderWidth:1,yAxisID:"y"},{label:"Sophie (voies)",data:sophieData,backgroundColor:"rgba(236,72,153,0.8)",borderColor:"rgb(236,72,153)",borderWidth:1,yAxisID:"y"},{label:"Bruno (niveau max)",data:brunoMax,type:"line",borderColor:"rgb(59,130,246)",backgroundColor:"transparent",borderWidth:2,yAxisID:"y1",pointRadius:4},{label:"Sophie (niveau max)",data:sophieMax,type:"line",borderColor:"rgb(236,72,153)",backgroundColor:"transparent",borderWidth:2,yAxisID:"y1",pointRadius:4}]},options:{responsive:true,maintainAspectRatio:true,plugins:{legend:{labels:{color:"#fff",font:{size:10}}},tooltip:{callbacks:{label:function(ctx){if(ctx.dataset.type==="line"){const idx=Math.round(ctx.parsed.y);return ctx.dataset.label+": "+app.cotations[idx]}return ctx.dataset.label+": "+ctx.parsed.y}}}},scales:{y:{beginAtZero:true,position:"left",ticks:{color:"#94a3b8",stepSize:1},grid:{color:"#334155"},title:{display:true,text:"Nombre de voies",color:"#94a3b8"}},y1:{position:"right",min:0,max:app.cotations.length-1,ticks:{color:"#94a3b8",callback:function(v){return app.cotations[Math.round(v)]||""}},grid:{display:false},title:{display:true,text:"Niveau max",color:"#94a3b8"}},x:{ticks:{color:"#94a3b8"},grid:{display:false}}}}})}};window.checkPassword=function(){const pwd=document.getElementById("password-input").value;if(pwd==="michel2025"){localStorage.setItem("escalade-auth","true");document.getElementById("login-screen").classList.add("hidden");document.getElementById("app-content").classList.remove("hidden");window.app.init()}else{document.getElementById("login-error").textContent="Mot de passe incorrect";document.getElementById("login-error").classList.remove("hidden")}};if(localStorage.getItem("escalade-auth")==="true"){document.getElementById("login-screen").classList.add("hidden");document.getElementById("app-content").classList.remove("hidden")}document.getElementById("password-input")?.addEventListener("keypress",e=>{if(e.key==="Enter")checkPassword()});
</script>
<div class="container">
<header><div class="version">v4.0</div><h1><span>‚õ∞Ô∏è</span>Escalade Tracker</h1><p class="subtitle">Suis ta progression et grimpe plus haut !</p></header>
<div class="nav">
<button class="active" onclick="app.showView('dashboard')">üìä Accueil</button>
<button onclick="app.showView('salles')">üè¢ Salles</button>
<button onclick="app.showView('falaises')">‚õ∞Ô∏è Falaises</button>
<button onclick="app.showView('sessions')">üìÖ Sessions</button>
<button onclick="app.showView('team')">üë• √âquipe</button>
</div>
<div id="dashboard-view">
<div class="stats">
<div class="stat-card"><div class="stat-label">Sessions</div><div class="stat-value" id="total-sessions">0</div></div>
<div class="stat-card"><div class="stat-label">R√©ussies</div><div class="stat-value" id="total-routes">0</div></div>
<div class="stat-card"><div class="stat-label">Max</div><div class="stat-value" id="best-grade">-</div></div>
</div>
<div class="card"><h2>Progression de l'ann√©e</h2><canvas id="yearChart" style="max-height:250px"></canvas></div>
<div class="card"><h2>Derni√®res sessions</h2><div id="recent-sessions"></div></div>
<div class="card"><h2>Projets en cours</h2><div id="current-projects"></div></div>
</div>
<div id="salles-view" class="hidden"><div class="card"><h2>Salles<button class="btn btn-primary" onclick="app.toggleForm('route-form-salles')">‚ûï Ajouter</button></h2><div id="route-form-salles" class="hidden" style="margin-bottom:18px"><div class="form-grid"><div class="form-group"><label>Ton nom</label><select id="route-username"><option value="">S√©lectionne</option><option value="Bruno">Bruno</option><option value="Sophie">Sophie</option></select></div><div class="form-group"><label>Nom de la voie</label><input type="text" id="route-nom" placeholder="Ex: La Directe"></div><div class="form-group"><label>Lieu (Salle)</label><input type="text" id="route-lieu" placeholder="Nautil" list="salles-list-dl"><datalist id="salles-list-dl"><option value="Nautil"></datalist></div><div class="form-group"><label>Cotation</label><select id="route-cotation"><option>5a</option><option>5b</option><option>5c</option><option selected>6a</option><option>6a+</option><option>6b</option><option>6b+</option><option>6c</option><option>6c+</option><option>7a</option><option>7a+</option><option>7b</option><option>7b+</option><option>7c</option><option>7c+</option><option>8a</option></select></div><div class="form-group"><label>Type</label><select id="route-type"><option value="copyrock">CopyRock</option><option value="dalle">Dalle</option><option value="devers">Devers</option><option value="gros-devers">Gros Devers</option><option value="petit-devers">Petit Devers</option><option value="vertical">Vertical</option></select></div><div class="form-group"><label>Statut</label><select id="route-statut"><option value="projet">Projet</option><option value="r√©ussi">R√©ussi</option><option value="abandon">Abandon</option></select></div><div class="form-group"><label>Essais</label><input type="number" id="route-essais" value="1" min="1"></div><div class="form-group"><label>Date</label><input type="date" id="route-date"></div><div class="form-group"><label>Notes</label><input type="text" id="route-notes" placeholder="Optionnel"></div><input type="hidden" id="route-categorie" value="salle"></div><div style="display:flex;gap:10px"><button class="btn btn-primary" onclick="app.addRoute()">‚úì Enregistrer</button><button class="btn btn-secondary" onclick="app.toggleForm('route-form-salles')">‚úï Annuler</button></div></div><div id="salles-list"></div></div></div>
<div id="falaises-view" class="hidden"><div class="card"><h2>Falaises<button class="btn btn-primary" onclick="app.toggleForm('route-form-falaises')">‚ûï Ajouter</button></h2><div id="route-form-falaises" class="hidden" style="margin-bottom:18px"><div class="form-grid"><div class="form-group"><label>Ton nom</label><select id="route-username-f"><option value="">S√©lectionne</option><option value="Bruno">Bruno</option><option value="Sophie">Sophie</option></select></div><div class="form-group"><label>Nom de la voie</label><input type="text" id="route-nom-f" placeholder="Ex: La Directe"></div><div class="form-group"><label>Lieu (Falaise)</label><input type="text" id="route-lieu-f" placeholder="Fontainebleau"></div><div class="form-group"><label>Cotation</label><select id="route-cotation-f"><option>5a</option><option>5b</option><option>5c</option><option selected>6a</option><option>6a+</option><option>6b</option><option>6b+</option><option>6c</option><option>6c+</option><option>7a</option><option>7a+</option><option>7b</option><option>7b+</option><option>7c</option><option>7c+</option><option>8a</option></select></div><div class="form-group"><label>Type</label><select id="route-type-f"><option value="copyrock">CopyRock</option><option value="dalle">Dalle</option><option value="devers">Devers</option><option value="gros-devers">Gros Devers</option><option value="petit-devers">Petit Devers</option><option value="vertical">Vertical</option></select></div><div class="form-group"><label>Statut</label><select id="route-statut-f"><option value="projet">Projet</option><option value="r√©ussi">R√©ussi</option><option value="abandon">Abandon</option></select></div><div class="form-group"><label>Essais</label><input type="number" id="route-essais-f" value="1" min="1"></div><div class="form-group"><label>Date</label><input type="date" id="route-date-f"></div><div class="form-group"><label>Notes</label><input type="text" id="route-notes-f" placeholder="Optionnel"></div></div><div style="display:flex;gap:10px"><button class="btn btn-primary" onclick="app.addRouteFalaise()">‚úì Enregistrer</button><button class="btn btn-secondary" onclick="app.toggleForm('route-form-falaises')">‚úï Annuler</button></div></div><div id="falaises-list"></div></div></div>
<div id="sessions-view" class="hidden"><div class="card"><h2>Sessions<button class="btn btn-primary" onclick="app.toggleForm('session-form')">‚ûï Ajouter</button></h2><div id="session-form" class="hidden" style="margin-bottom:18px"><div class="form-grid"><div class="form-group"><label>Ton nom</label><select id="session-username"><option value="">S√©lectionne</option><option value="Bruno">Bruno</option><option value="Sophie">Sophie</option></select></div><div class="form-group"><label>Date</label><input type="date" id="session-date"></div><div class="form-group"><label>Lieu</label><input type="text" id="session-lieu" placeholder="Falaise / Spot"></div><div class="form-group"><label>Dur√©e</label><input type="text" id="session-duree" placeholder="Ex: 2h30"></div><div class="form-group"><label>Notes</label><input type="text" id="session-notes" placeholder="Optionnel"></div></div><div style="display:flex;gap:10px"><button class="btn btn-primary" onclick="app.addSession()">‚úì Enregistrer</button><button class="btn btn-secondary" onclick="app.toggleForm('session-form')">‚úï Annuler</button></div></div><div id="sessions-list"></div></div></div>
<div id="team-view" class="hidden"><div class="card"><h2>Activit√© r√©cente</h2><div id="team-activity"></div></div><div class="card"><h2>Classement</h2><div id="team-ranking"></div></div></div>
</div>
<div class="sync"><div class="sync-dot"></div><span id="sync-status">Synchronis√©</span></div>
<script>
window.app.addRouteFalaise=function(){const u=document.getElementById("route-username-f").value,r={id:Date.now(),username:u,nom:document.getElementById("route-nom-f").value,cotation:document.getElementById("route-cotation-f").value,categorie:"falaise",lieu:document.getElementById("route-lieu-f").value,type:document.getElementById("route-type-f").value,statut:document.getElementById("route-statut-f").value,essais:parseInt(document.getElementById("route-essais-f").value),date:document.getElementById("route-date-f").value,notes:document.getElementById("route-notes-f").value};if(!r.username||!r.nom||!r.date||!r.lieu){alert("Remplis au moins ton nom, le nom de la voie, le lieu et la date");return}if(r.username){this.user=r.username;localStorage.setItem("climbing-username",this.user)}this.saveRoute(r);document.getElementById("route-username-f").value=this.user;document.getElementById("route-nom-f").value="";document.getElementById("route-cotation-f").value="6a";document.getElementById("route-lieu-f").value="";document.getElementById("route-type-f").value="copyrock";document.getElementById("route-statut-f").value="projet";document.getElementById("route-essais-f").value="1";document.getElementById("route-date-f").value=new Date().toISOString().split("T")[0];document.getElementById("route-notes-f").value="";this.toggleForm("route-form-falaises")};
</script>
</div>
</body>
</html>